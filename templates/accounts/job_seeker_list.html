{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
    جاک | لیست کارجویان
{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/FJ.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'css/RF.css' %}"/>
    <link href="{% static 'css/help.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block js %}
    <script src="{% static 'js/rf.js' %}"></script>
    <script src="{% static 'js/help.js' %}"></script>
    <script>

        function mySina() {
            x = $("#submit_button")[0];
            x.click();
        }
    </script>


{% endblock %}

{% block content %}
    <div class="center">
    <div class="ctn-box">
    <form id="job_seeker_list_form">
        <div class="ui icon input left small" onkeypress="submit_jobseeker_list(event)">
            {{ search_form.search_input }}
            <i class="inverted search icon" onclick="mySina()" style="cursor: pointer"></i>
        </div>

        <small class="advanced_search">جستجوی پیشرفته</small>

        <label style="display: inline-block">

            <i class="tiny help icon" id="help_icon" help-id="0" style="cursor: pointer"></i>

            <div id="msg_div0" class="Sina_help Sina_help_news " help-id="0" style="margin-top: -16px;">
                {{ search_form.search_input.help_text }}
            </div>
        </label>

        <div class="advanced_search_panel ui segment form">
            <div class="container">
                <div class="advanced_search_form rf">
                    <div class="ui form">
                        <div class="section">
                            <h3 class="inline_block">اطلاعات کاربری</h3>

                            <label style="display: inline-block">

                                <i class="tiny help icon" id="help_icon" help-id="1" style="cursor: pointer"></i>

                                <div id="msg_div1" class="Sina_help Sina_help_news "
                                     style="margin-top: -16px;">
                                    {{ search_form.first_name.help_text }}
                                </div>
                            </label>


                            <div class="three fields">
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.sex.label_tag }}: </label>
                                    {{ search_form.sex }}
                                </div>

                                <div class="inline field">
                                    <label class="input-details">{{ search_form.last_name.label_tag }}: </label>
                                    {{ search_form.last_name }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.first_name.label_tag }}: </label>
                                    {{ search_form.first_name }}
                                </div>
                            </div>
                            <div class="three fields">
                                <div class="inline field">

                                    <label class="input-details">{{ search_form.state.label_tag }}: </label>
                                    {{ search_form.state }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.city.label_tag }}: </label>
                                    {{ search_form.city }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.married.label_tag }}: </label>
                                    {{ search_form.married }}
                                </div>
                            </div>
                            <h3 class="inline_block">اطلاعات تحصیلی</h3>

                            <label style="display: inline-block">

                                <i class="tiny help icon" id="help_icon" help-id="2" style="cursor: pointer"></i>

                                <div id="msg_div2" class="Sina_help Sina_help_news "
                                     style="margin-top: -16px;">
                                    {{ search_form.certificate.help_text }}
                                </div>
                            </label>

                            <div class="three fields">
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.edu_orientation.label_tag }}: </label>
                                    {{ search_form.edu_orientation }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.edu_major.label_tag }}: </label>
                                    {{ search_form.edu_major }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.certificate.label_tag }}: </label>
                                    {{ search_form.certificate }}
                                </div>
                            </div>

                            <div class='ui three fields'>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.edu_uni_type.label_tag }}: </label>
                                    {{ search_form.edu_uni_type }}
                                </div>

                                <div class="inline field">
                                    <label class="input-details">{{ search_form.edu_uni_name.label_tag }}: </label>
                                    {{ search_form.edu_uni_name }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.edu_status.label_tag }}: </label>
                                    {{ search_form.edu_status }}
                                </div>
                            </div>

                            <h3 class="inline_block">اطلاعات کاری</h3>

                            <label style="display: inline-block">

                                <i class="tiny help icon" id="help_icon" help-id="3" style="cursor: pointer"></i>

                                <div id="msg_div3" class="Sina_help Sina_help_news "
                                     style="margin-top: -16px;">
                                    {{ search_form.exp_title.help_text }}
                                </div>
                            </label>

                            <div class="ui three fields">
                                <div class="inline field">
                                    {#                                        <label class="input-details">{{ search_form.skill_description.label_tag }}: </label>#}
                                    {#                                        {{ search_form.skill_description }}#}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.exp_place.label_tag }}: </label>
                                    {{ search_form.exp_place }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.exp_title.label_tag }}: </label>
                                    {{ search_form.exp_title }}
                                </div>

                            </div>

                            <h3 class="inline_block">مهارت‌ها</h3>

                            <label style="display: inline-block">

                                <i class="tiny help icon" id="help_icon" help-id="4" style="cursor: pointer"></i>

                                <div id="msg_div4" class="Sina_help Sina_help_news "
                                     style="margin-top: -16px;">
                                    {{ search_form.skill_title.help_text }}
                                </div>
                            </label>

                            <div class="ui three fields">
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.skill_description.label_tag }}: </label>
                                    {{ search_form.skill_description }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.skill_level.label_tag }}: </label>
                                    {{ search_form.skill_level }}
                                </div>
                                <div class="inline field">
                                    <label class="input-details">{{ search_form.skill_title.label_tag }}: </label>
                                    {{ search_form.skill_title }}
                                </div>
                            </div>
                        </div>

                        <div class="search_buttons">
                            <input class="inline ui button" type="reset" value="پاک کردن">
                            <input class="inline ui button" type="submit" id="submit_button" value="جستجو">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="user_list">
        {% if job_seekers %}
            {% for job_seeker in job_seekers %}
                <div class="ui raised segment single_user" id='job_seeker{{ job_seeker.id }}'>
                    <div class="user_number inlineblock inlinemiddle ">
                        {{ forloop.counter }}
                    </div>
                    <a href="{% url 'show_profile' %}?pk={{ job_seeker.pk }}">
                        <img class="inlinemiddle"
                             src="{{ job_seeker.profile.image.thumbnail.url|default:'/static/images/user.png' }}"></a>

                    <div class="inlinemiddle inlineblock user_data">
                        <div class="rf-vertical-divider"></div>
                        <div class="rf-user-info i1">
                            <div class="user_title"><span>نام: </span>{{ job_seeker.get_full_name }}</div>
                            <div class="user_email"><span>نام کاربری: </span>{{ job_seeker.email }}</div>
                            <div class="user_national_id">
                                <span>کدملی: </span>{{ job_seeker.profile.national_id }}
                            </div>
                        </div>
                        <div class="rf-user-info i2">
                            <div><span>شماره تماس: </span>{{ job_seeker.profile.phone_number }}</div>
                            <div><span>استان: </span>{{ job_seeker.profile.state.name }}</div>
                            <div><span>شهر: </span>{{ job_seeker.profile.city.name }}</div>
                        </div>
                    </div>
                    <div class="user-buttons">
                        {% if user_type == 'manager' %}
                            {% if approved %}
                                <div class="ui icon tiny linkedin button rf-button"
                                     onclick='window.location="{% url 'show_profile' %}?pk={{ job_seeker.pk }}"'>
                                    <i class=" user icon"></i><br/>
                                    پروفایل
                                </div>
                                <div class="ui icon tiny red button rf-button"
                                     onclick="disapprove_user({{ job_seeker.id }}, 'job_seeker')">
                                    <i class=" remove icon"></i>

                                    <div>
                                        غیرفعال
                                    </div>
                                </div>
                            {% else %}
                                <div class="ui icon tiny linkedin button rf-button"
                                     onclick="approve_user({{ job_seeker.id }}, 'job_seeker')">
                                    <i class=" user icon"></i><br/>
                                    تایید
                                </div>
                                <div class="ui icon tiny red button rf-button"
                                     onclick="remove_user({{ job_seeker.id }}, 'job_seeker')">
                                    <i class=" remove icon"></i>

                                    <div>
                                        حذف
                                    </div>
                                </div>

                            {% endif %}
                        {% elif user_type == 'jobseeker' %}

                            <div class="ui icon tiny linkedin button rf-button"
                                 onclick='window.location="{% url 'show_profile' %}?pk={{ job_seeker.pk }}"'>
                                <i class=" user icon"></i><br/>
                                پروفایل
                            </div>

                        {% elif user_type == 'employer' %}

                            <div class="ui icon tiny linkedin button rf-button"
                                 onclick='window.location="{% url 'show_profile' %}?pk={{ job_seeker.pk }}"'>
                                <i class=" user icon"></i><br/>
                                پروفایل
                            </div>
                            <div class="ui icon tiny green button rf-button"
                                 onclick='window.location="{% url 'add_request' 'eReq' %}?pk={{ job_seeker.pk }}"'>
                                <i class=" add icon"></i>

                                <div>
                                    درخواست
                                </div>
                            </div>
                        {% else %}
                        {% endif %}
                    </div>
                </div>
                <div class="ui section divider"
                     style="margin-top:0.5rem !important;margin-bottom:0.5rem !important"></div>
            {% endfor %}

            {% if job_seekers.paginator.num_pages > 1 %}
                <div style="text-align: center;">
                    <div class="ui small pagination menu">
                        {% if job_seekers.has_previous %}
                            <a href="?{{ get_params.urlencode }}&page={{ job_seekers.previous_page_number }}"
                               class="icon item"><i class="icon right arrow"></i></a>
                        {% endif %}

                        {% for p in page_range %}
                            {% ifequal p job_seekers.number %}
                                <a href="javascript:void(0);" class="active item">{{ p }}</a>
                            {% else %}
                                <a class="item" href="?{{ get_params.urlencode }}&page={{ p }}"> {{ p }}</a>
                            {% endifequal %}
                        {% endfor %}
                        {% if job_seekers.has_next %}
                            <a class="item"
                               href="?{{ get_params.urlencode }}&page={{ job_seekers.next_page_number }}"
                               class="icon item"><i class="icon left arrow"></i></a>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        {% else %}
            <div class="ui message error rf-no-list-item">
                کاربری با مشخصات خواسته شده، وجود ندارد.
            </div>
        {% endif %}
    </div>
    </div>
    </div>
{% endblock %}